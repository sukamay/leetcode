---
title: leetcode_hard_639

date: 2019/08/11 00:24:37
categories:
-leetcode
---

# leetcode_hard_639



>ä¸€æ¡åŒ…å«å­—æ¯ A-Z çš„æ¶ˆæ¯é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼è¿›è¡Œäº†ç¼–ç ï¼š
>
>'A' -> 1
>'B' -> 2
>...
>'Z' -> 26
>é™¤äº†ä¸Šè¿°çš„æ¡ä»¶ä»¥å¤–ï¼Œç°åœ¨åŠ å¯†å­—ç¬¦ä¸²å¯ä»¥åŒ…å«å­—ç¬¦ '*'äº†ï¼Œå­—ç¬¦'*'å¯ä»¥è¢«å½“åš1åˆ°9å½“ä¸­çš„ä»»æ„ä¸€ä¸ªæ•°å­—ã€‚
>
>ç»™å®šä¸€æ¡åŒ…å«æ•°å­—å’Œå­—ç¬¦'*'çš„åŠ å¯†ä¿¡æ¯ï¼Œè¯·ç¡®å®šè§£ç æ–¹æ³•çš„æ€»æ•°ã€‚
>
>åŒæ—¶ï¼Œç”±äºç»“æœå€¼å¯èƒ½ä¼šç›¸å½“çš„å¤§ï¼Œæ‰€ä»¥ä½ åº”å½“å¯¹109 + 7å–æ¨¡ã€‚ï¼ˆç¿»è¯‘è€…æ ‡æ³¨ï¼šæ­¤å¤„å–æ¨¡ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æº¢å‡ºï¼‰
>
>ç¤ºä¾‹ 1 :
>
>è¾“å…¥: "*"
>è¾“å‡º: 9
>è§£é‡Š: åŠ å¯†çš„ä¿¡æ¯å¯ä»¥è¢«è§£å¯†ä¸º: "A", "B", "C", "D", "E", "F", "G", "H", "I".
>ç¤ºä¾‹ 2 :
>
>è¾“å…¥: "1*"
>è¾“å‡º: 9 + 9 = 18ï¼ˆç¿»è¯‘è€…æ ‡æ³¨ï¼šè¿™é‡Œ1*å¯ä»¥åˆ†è§£ä¸º1,* æˆ–è€…å½“åš1*æ¥å¤„ç†ï¼Œæ‰€ä»¥ç»“æœæ˜¯9+9=18ï¼‰
>è¯´æ˜ :
>
>è¾“å…¥çš„å­—ç¬¦ä¸²é•¿åº¦èŒƒå›´æ˜¯ [1, 105]ã€‚
>è¾“å…¥çš„å­—ç¬¦ä¸²åªä¼šåŒ…å«å­—ç¬¦ '*' å’Œ æ•°å­—'0' - '9'ã€‚

## Method 1:

åŠ¨æ€è§„åˆ’ï¼Œéœ€è¦åˆ†æ¯”è¾ƒå¤šæƒ…å†µï¼Œä½†æ˜¯ç†æ¸…æ¥šå°±å¥½äº†
given string : $x_1x_2 \dots x_n$ , $f(n)$ ä¸ºé•¿åº¦ä¸º $n$ çš„è§£ç æ–¹å¼ğŸŒ²
$$
f(n) = f(n-1) * g(x_n) + f(n-2) * g(x_{n-1}x_n)
$$

$$
g(x_n) = \begin{matrix} 9,x_n = '*' \\ 0, x_n = '0' \\ 1, else\end{matrix}
$$
æ‹¬å·é‡Œè¡¨ç¤ºabä¸¤ä¸ªå­—ç¬¦çš„å–å€¼ï¼Œæˆ‘æ‡’å¾—å†™äº†QAQ
$$
g(ab) = \begin{matrix}2 & (*,0-6 ) \\ 1 & (*,7-9)  \\ 9 & (1,*) \\ 6 &(2,*) \\ 0 & (3-9,*) \\ 15 & (*,*) \\ 0 & (0,-) \\ 1 & (1,0-9) \\ 1 & (2,0-6) \\ 0 && else\end{matrix}
$$



```C++
class Solution {
public:
    int numDecodings(string s) {
        const int MOD = 1000000007;
        int len = s.length();
        vector<int> dp(len+1,1);
        if(s[0] == '0'){
            return 0;
        }else if(s[0] == '*'){
            dp[1] = 9;
        }
        for(int i = 1;i < len;i++){
            long g1,g2;
            if(s[i] == '*'){
                g1 = 9;
            }else if(s[i] == '0'){
                g1 = 0;
            }else{
                g1 = 1;
            }
            if(s[i-1] == '*'){
                if(s[i] == '*'){
                    g2 = 15;
                }else if(s[i] < '7'){
                    g2 = 2;
                }else{
                    g2 = 1;
                }
            }else if(s[i] == '*'){
                if(s[i-1] == '1'){
                    g2 = 9;
                }else if(s[i-1] == '2'){
                    g2 = 6;
                }else{
                    g2 = 0;
                }
            }else if((s[i-1] == '0') || (s[i-1] > '2') || (s[i-1] == '2' && s[i] > '6')){
                g2 = 0;
            }else{
                g2 = 1;
            }
            dp[i+1] = (g1 * dp[i] + g2 * dp[i-1])% MOD;
            // cout << i+1 << " : " << dp[i+1] << endl;
        }
        return dp[len];
    }
};
```

>æ‰§è¡Œç»“æœï¼š
>
>é€šè¿‡
>
>æ˜¾ç¤ºè¯¦æƒ… 
>
>æ‰§è¡Œç”¨æ—¶ :68 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†57.81%çš„ç”¨æˆ·
>
>å†…å­˜æ¶ˆè€— :19 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†46.43%çš„ç”¨æˆ·

leetcodeå‡å°‘æ—¶é—´ä¸€ä¸ªé¢‡ä¸ºæœ‰æ•ˆçš„æ–¹æ³•ï¼š

å¼€å¤´åŠ ä¸Š

```C++
static const auto _ = []()
{
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    return nullptr;
}();
```

ç‰¹åˆ«æ˜¯è¾“å‡ºæ¯”è¾ƒå¤šçš„é¢˜ç›®æ•ˆæœéå¸¸æ˜æ˜¾ï¼Œè¿™æ®µä»£ç ä¸»è¦æ˜¯å…è®¸è¾“å…¥è¾“å‡ºå¼‚æ­¥ï¼Œè¯¦æƒ…å¯çœ‹ioséƒ¨åˆ†çš„ç›¸å…³å‚æ•°æ„ä¹‰

åŠ ä¸Šä¹‹å

>æ‰§è¡Œç»“æœï¼š
>
>é€šè¿‡
>
>æ˜¾ç¤ºè¯¦æƒ… 
>
>æ‰§è¡Œç”¨æ—¶ :28 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·
>
>å†…å­˜æ¶ˆè€— :18.9 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†46.43%çš„ç”¨æˆ·